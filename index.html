<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Responsive Romantic Lyrics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&display=swap"
      rel="stylesheet" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: #0a0a0a;
        height: 100vh;
        overflow: hidden;
        position: relative;
        cursor: default;
      }

      #particles-js {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      .lyrics-container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 800px;
        max-height: 90vh;
        text-align: center;
        z-index: 3;
        pointer-events: none;
        padding: 20px 0;
      }

      .lyric {
        font-family: "Cormorant Garamond", serif;
        font-weight: 600;
        font-size: clamp(1.8rem, 5vw, 2.8em);
        color: #ffffff;
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: 95%;
        opacity: 0;
        text-shadow: 0 0 15px rgba(255, 105, 180, 0.8),
          0 0 25px rgba(255, 105, 180, 0.6), 0 0 35px rgba(255, 105, 180, 0.4);
        line-height: 1.3;
        letter-spacing: 0.5px;
        will-change: opacity;
        padding: 10px;
        transition: opacity 0.5s ease;
        word-wrap: break-word;
      }

      .lyric.active {
        opacity: 1;
        animation: text-glow 2s ease-in-out infinite alternate;
      }

      .floating-element {
        position: absolute;
        font-size: clamp(18px, 3vw, 28px);
        filter: drop-shadow(0 0 8px #ff69b4);
        opacity: 0.8;
        z-index: 2;
        pointer-events: none;
      }

      #music-player {
        display: none;
      }

      @keyframes text-glow {
        from {
          text-shadow: 0 0 15px rgba(255, 105, 180, 0.8),
            0 0 25px rgba(255, 105, 180, 0.6), 0 0 35px rgba(255, 105, 180, 0.4);
        }
        to {
          text-shadow: 0 0 20px rgba(255, 105, 180, 1),
            0 0 30px rgba(255, 105, 180, 0.8), 0 0 40px rgba(255, 105, 180, 0.6);
        }
      }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        .lyric {
          line-height: 1.2;
          padding: 8px;
        }

        .lyrics-container {
          max-height: 85vh;
        }
      }

      @media (max-width: 480px) {
        .lyric {
          font-size: clamp(1.5rem, 6vw, 2rem);
          line-height: 1.1;
        }

        .floating-element {
          font-size: 16px;
        }
      }

      @media (orientation: landscape) and (max-height: 500px) {
        .lyric {
          font-size: 1.5rem;
          line-height: 1.1;
        }

        .lyrics-container {
          max-height: 80vh;
        }
      }
    </style>
  </head>
  <body>
    <div id="music-player">
      <audio id="background-music" autoplay loop>
        <source src="v3.mp3" type="audio/mpeg" />
      </audio>
    </div>
    <div id="particles-js"></div>
    <div class="lyrics-container" id="lyrics-container"></div>

    <script>
      // Konfigurasi Responsif Partikel
      const getParticleConfig = () => ({
        particles: {
          number: {
            value: window.innerWidth < 768 ? 50 : 100,
          },
          color: { value: "#ff85c0" },
          shape: { type: "circle" },
          opacity: {
            value: 0.5,
            random: true,
          },
          size: {
            value: window.innerWidth < 768 ? 2 : 2.5,
            random: true,
          },
          move: {
            enable: true,
            speed: window.innerWidth < 768 ? 1 : 1.5,
            direction: "none",
            random: true,
            straight: false,
            out_mode: "out",
            bounce: false,
            smooth: true,
          },
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: {
              enable: true,
              mode: "repulse",
              distance: window.innerWidth < 768 ? 80 : 120,
            },
            resize: true,
          },
          modes: {
            repulse: {
              distance: window.innerWidth < 768 ? 50 : 80,
              duration: 0.6,
            },
          },
        },
      });

      // Konfigurasi Lirik
      const lyricsConfig = [
        {
          text: "For Youâ¤ï¸",
          start: 0,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Kumulai lagu ini dengan bernyanyi",
          start: 18,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Du-dudu-dudu-dudu", start: 21.5, fadeIn: 0.5, fadeOut: 0.5 },
        {
          text: "Waktu berhenti khayal menari-nari",
          start: 25,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Hanyut ke dalam senyummu",
          start: 30,
          fadeIn: 1.2,
          fadeOut: 0.8,
        },
        {
          text: "Tak peduli langit menertawakanku",
          start: 34,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Kau mencuri hatiku, mimpiku, semua rinduku",
          start: 43,
          fadeIn: 1.5,
          fadeOut: 1.5,
        },
        { text: "Kar'na kamu cantik", start: 52, fadeIn: 0.8, fadeOut: 0.8 },
        {
          text: "'Kan kuberi s'galanya apa yang kupunya",
          start: 56,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Dan hatimu baik", start: 61, fadeIn: 0.7, fadeOut: 0.7 },
        {
          text: "Sempurnalah duniaku saat kau di sisiku",
          start: 64.5,
          fadeIn: 1.5,
          fadeOut: 1.5,
        },
        {
          text: "Bukan kar'na make up di wajahmu",
          start: 73,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Atau lipstik merah itu (di bibirmu)",
          start: 77,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Lembut hati tutur kata", start: 81.5, fadeIn: 1, fadeOut: 1 },
        {
          text: "Terciptalah cinta yang kupuja",
          start: 85,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Tak peduli langit menertawakanku",
          start: 90,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Kau mencuri hatiku, mimipiku, semua rinduku",
          start: 98,
          fadeIn: 1.2,
          fadeOut: 1.2,
        },
        { text: "Kar'na kamu cantik", start: 108.5, fadeIn: 0.8, fadeOut: 0.8 },
        {
          text: "'Kan kuberi s'galanya apa yang kupunya",
          start: 112.5,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Dan hatimu baik", start: 117, fadeIn: 0.7, fadeOut: 0.7 },
        {
          text: "Sempurnalah duniaku saat kau di sisiku",
          start: 120.5,
          fadeIn: 1.5,
          fadeOut: 1.5,
        },
      ];

      // Sistem Utama
      let floatingElements = [];
      let currentLyric = -1;
      const audio = document.getElementById("background-music");
      const lyricsContainer = document.getElementById("lyrics-container");

      const initParticles = () =>
        particlesJS("particles-js", getParticleConfig());

      const createFloatingElements = () => {
        // Hapus element sebelumnya
        floatingElements.forEach((el) => el.remove());
        floatingElements = [];

        const elements = ["ðŸŒ¸", "ðŸ’®", "ðŸŒº", "ðŸŒ·", "ðŸ’–", "âœ¨"];
        const count = window.innerWidth < 768 ? 15 : 20;

        for (let i = 0; i < count; i++) {
          const element = document.createElement("div");
          element.className = "floating-element";
          element.textContent =
            elements[Math.floor(Math.random() * elements.length)];

          gsap.set(element, {
            x: Math.random() * window.innerWidth,
            y: Math.random() * window.innerHeight,
            scale: Math.random() * 0.4 + 0.6,
            rotation: Math.random() * 360,
          });

          gsap.to(element, {
            y: "+=300",
            rotation: 360,
            duration: Math.random() * 8 + 6,
            repeat: -1,
            yoyo: true,
            ease: "sine.inOut",
          });

          document.body.appendChild(element);
          floatingElements.push(element);
        }
      };

      const generateLyrics = () => {
        lyricsConfig.forEach((lyric, index) => {
          const div = document.createElement("div");
          div.className = `lyric${index === 0 ? " active" : ""}`;
          div.textContent = lyric.text;
          lyricsContainer.appendChild(div);
        });
      };

      const handleResize = () => {
        initParticles();
        createFloatingElements();
        gsap.set(".lyric", { clearProps: "all" });
      };

      const updateLyric = (newIndex) => {
        if (currentLyric >= 0) {
          gsap.to(lyrics[currentLyric], {
            opacity: 0,
            duration: lyricsConfig[currentLyric].fadeOut,
            ease: "power2.out",
          });
        }

        currentLyric = newIndex;
        gsap.fromTo(
          lyrics[currentLyric],
          { opacity: 0 },
          {
            opacity: 1,
            duration: lyricsConfig[currentLyric].fadeIn,
            ease: "power2.in",
          }
        );
      };

      // Event Listeners
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(handleResize, 500);
      });

      audio.addEventListener("timeupdate", () => {
        const currentTime = audio.currentTime;
        const newLyricIndex = lyricsConfig.findIndex(
          (lyric, index) =>
            currentTime >= lyric.start &&
            (index === lyricsConfig.length - 1 ||
              currentTime < lyricsConfig[index + 1].start)
        );

        if (newLyricIndex !== -1 && newLyricIndex !== currentLyric) {
          updateLyric(newLyricIndex);
        }
      });

      // Inisialisasi
      initParticles();
      generateLyrics();
      createFloatingElements();
      const lyrics = document.querySelectorAll(".lyric");

      // Auto-play handling
      const playAudio = () =>
        audio.play().catch(() => {
          document.body.addEventListener("click", playAudio, { once: true });
        });
      window.addEventListener("DOMContentLoaded", playAudio);
      document.addEventListener("click", playAudio, { once: true });
    </script>
  </body>
</html>
