<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Synced Romantic Lyrics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&display=swap"
      rel="stylesheet" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: #0a0a0a;
        height: 100vh;
        overflow: hidden;
        position: relative;
        cursor: default;
      }

      #particles-js {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      .lyrics-container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 800px;
        text-align: center;
        z-index: 2;
      }

      .lyric {
        font-family: "Cormorant Garamond", serif;
        font-weight: 600;
        font-size: 2.8em;
        color: #ffffff;
        position: absolute;
        width: 100%;
        opacity: 0;
        text-shadow: 0 0 15px rgba(255, 105, 180, 0.8),
          0 0 25px rgba(255, 105, 180, 0.6), 0 0 35px rgba(255, 105, 180, 0.4);
        pointer-events: none;
        line-height: 1.4;
        letter-spacing: 1px;
        will-change: opacity;
      }

      .lyric.active {
        opacity: 1;
        animation: text-glow 2s ease-in-out infinite alternate;
      }

      .floating-element {
        position: absolute;
        font-size: 28px;
        filter: drop-shadow(0 0 8px #ff69b4);
        opacity: 0.8;
        z-index: 3;
      }

      #music-player {
        display: none;
      }

      @keyframes text-glow {
        from {
          text-shadow: 0 0 15px rgba(255, 105, 180, 0.8),
            0 0 25px rgba(255, 105, 180, 0.6), 0 0 35px rgba(255, 105, 180, 0.4);
        }
        to {
          text-shadow: 0 0 20px rgba(255, 105, 180, 1),
            0 0 30px rgba(255, 105, 180, 0.8), 0 0 40px rgba(255, 105, 180, 0.6);
        }
      }
    </style>
  </head>
  <body>
    <div id="music-player">
      <audio id="background-music" autoplay loop>
        <source src="layla1.mp3" type="audio/mpeg" />
      </audio>
    </div>
    <div id="particles-js"></div>
    <div class="lyrics-container" id="lyrics-container"></div>

    <script>
      // Konfigurasi lirik dengan waktu dan durasi transisi custom
      const lyricsConfig = [
        {
          text: "For You❤️",
          start: 0,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Kumulai lagu ini dengan bernyanyi",
          start: 18,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Du-dudu-dudu-dudu", start: 21, fadeIn: 0.5, fadeOut: 0.5 },
        {
          text: "Waktu berhenti khayal menari-nari",
          start: 25,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Hanyut ke dalam senyummu",
          start: 30,
          fadeIn: 1.2,
          fadeOut: 0.8,
        },
        {
          text: "Tak peduli langit menertawakanku",
          start: 34,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Kau mencuri hatiku, mimpiku, semua rinduku",
          start: 43,
          fadeIn: 1.5,
          fadeOut: 1.5,
        },
        { text: "Kar'na kamu cantik", start: 52, fadeIn: 0.8, fadeOut: 0.8 },
        {
          text: "'Kan kuberi s'galanya apa yang kupunya",
          start: 56,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Dan hatimu baik", start: 61, fadeIn: 0.7, fadeOut: 0.7 },
        {
          text: "Sempurnalah duniaku saat kau di sisiku",
          start: 64.5,
          fadeIn: 1.5,
          fadeOut: 1.5,
        },
        {
          text: "Bukan kar'na make up di wajahmu",
          start: 86,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Atau lipstik merah itu (di bibirmu)",
          start: 91.5,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Lembut hati tutur kata", start: 95.5, fadeIn: 1, fadeOut: 1 },
        {
          text: "Terciptalah cinta yang kupuja",
          start: 99,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Tak peduli langit menertawakanku",
          start: 104,
          fadeIn: 1,
          fadeOut: 1,
        },
        {
          text: "Kau mencuri hatiku, mimipiku, semua rinduku",
          start: 113,
          fadeIn: 1.2,
          fadeOut: 1.2,
        },
        { text: "Kar'na kamu cantik", start: 121.5, fadeIn: 0.8, fadeOut: 0.8 },
        {
          text: "'Kan kuberi s'galanya apa yang kupunya",
          start: 125.5,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Dan hatimu baik", start: 130, fadeIn: 0.7, fadeOut: 0.7 },
        {
          text: "Sempurnalah duniaku saat kau di sisiku",
          start: 134,
          fadeIn: 1.5,
          fadeOut: 1.5,
        },
        { text: "Kar'na kamu cantik", start: 155, fadeIn: 0.8, fadeOut: 0.8 },
        {
          text: "'Kan kuberi s'galanya apa yang kupunya",
          start: 160,
          fadeIn: 1,
          fadeOut: 1,
        },
        { text: "Dan hatimu baik", start: 165, fadeIn: 0.7, fadeOut: 0.7 },
        {
          text: "Sempurnalah duniaku saat kau di sisiku",
          start: 170,
          fadeIn: 2,
          fadeOut: 2,
        },
        // ... tambahkan konfigurasi untuk semua lirik
        // Format: { text: "lirik", start: waktu_detik, fadeIn: durasi, fadeOut: durasi }
      ];

      // Inisialisasi partikel
      particlesJS("particles-js", {
        particles: {
          number: { value: 100 },
          color: { value: "#ff85c0" },
          shape: { type: "circle" },
          opacity: { value: 0.5, random: true },
          size: { value: 2.5, random: true },
          move: {
            enable: true,
            speed: 1.5,
            direction: "none",
            random: true,
            straight: false,
            out_mode: "out",
            bounce: false,
            smooth: true,
          },
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "repulse", distance: 120 },
            resize: true,
          },
          modes: { repulse: { distance: 80, duration: 0.6 } },
        },
      });

      // Generate lirik
      const lyricsContainer = document.getElementById("lyrics-container");
      lyricsConfig.forEach((lyric, index) => {
        const div = document.createElement("div");
        div.className = `lyric${index === 0 ? " active" : ""}`;
        div.textContent = lyric.text;
        lyricsContainer.appendChild(div);
      });

      // Sistem kontrol audio dan lirik
      const audio = document.getElementById("background-music");
      const lyrics = document.querySelectorAll(".lyric");
      let currentLyric = -1;

      // Autoplay handler
      const playAudio = () => {
        audio.play().catch((error) => {
          document.body.addEventListener("click", playAudio, { once: true });
        });
      };

      // Mulai musik saat halaman dimuat
      window.addEventListener("DOMContentLoaded", playAudio);
      document.addEventListener("click", playAudio, { once: true });

      // Update lirik sesuai waktu musik
      audio.addEventListener("timeupdate", () => {
        const currentTime = audio.currentTime;

        // Cari lirik yang sesuai
        const newLyricIndex = lyricsConfig.findIndex(
          (lyric, index) =>
            currentTime >= lyric.start &&
            (index === lyricsConfig.length - 1 ||
              currentTime < lyricsConfig[index + 1].start)
        );

        if (newLyricIndex !== -1 && newLyricIndex !== currentLyric) {
          updateLyric(newLyricIndex);
        }
      });

      function updateLyric(newIndex) {
        if (currentLyric >= 0) {
          // Fade out lirik sebelumnya
          gsap.to(lyrics[currentLyric], {
            opacity: 0,
            duration: lyricsConfig[currentLyric].fadeOut,
            ease: "power2.out",
          });
        }

        currentLyric = newIndex;

        // Fade in lirik baru
        gsap.fromTo(
          lyrics[currentLyric],
          { opacity: 0 },
          {
            opacity: 1,
            duration: lyricsConfig[currentLyric].fadeIn,
            ease: "power2.in",
          }
        );
      }

      // Floating elements
      function createFloatingElements() {
        const elements = ["🌸", "💮", "🌺", "🌷", "💖", "✨"];
        for (let i = 0; i < 20; i++) {
          const element = document.createElement("div");
          element.className = "floating-element";
          element.textContent =
            elements[Math.floor(Math.random() * elements.length)];

          gsap.set(element, {
            x: Math.random() * window.innerWidth,
            y: Math.random() * window.innerHeight,
            scale: Math.random() * 0.4 + 0.6,
            rotation: Math.random() * 360,
          });

          gsap.to(element, {
            y: "+=300",
            rotation: 360,
            duration: Math.random() * 8 + 6,
            repeat: -1,
            yoyo: true,
            ease: "sine.inOut",
          });

          document.body.appendChild(element);
        }
      }

      createFloatingElements();
    </script>
  </body>
</html>
